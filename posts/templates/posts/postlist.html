{% extends 'base.html' %}
{% load static %}
{% block content %}

    <div class="site-section">
      <div class="container">
        <div class="row">
          <div class="col-lg-9" >
            <div class="section-title">
              <h2><a style="color:black;" href="{% url 'posts:new_post' %}">글쓰기</a></h3>
            </div>
            <div id="postlist"></div>
            {% for post in posts %}
            
            <script  src="http://code.jquery.com/jquery-latest.min.js"></script>
            
            <script>
              function posting (){
                    var post_id = {{post.id}};
                    var hash = {{hashtag|safe}};
                    var html = "";
                    console.log(post_id);
                    var hashtag='<span class="d-block">';
                    for(var item in hash[post_id]){
                      hashtag+='#'+hash[post_id][item]+' ';
                    }
                    hashtag+='</span>';
                    html +=
                    '<div class="post-entry-2 d-flex">'+
                    '<div class="thumbnail order-md-2" style="background-image: url({{post.image.url}});">hi</div>'+
                    '<div class="contents order-md-1 pl-0">'+
                    '<h2><a href="{% url "posts:detail" post.id %}">{{post.title}}</a></h2>'+
                    '<p class="mb-3">{{post.body|truncatechars:30}}</p>'+
                    '<div class="post-meta">'+
                    '<span class="d-block">~{{post.deadline}}</span>'+
                    hashtag+
                    '<span class="d-block">작성자 : {{post.writer}}</span>'+             
                    '</div>'+
                    '</div>'+
                    '</div>';
                    
                    $("#postlist").append(html); 
                    
                  }
                  
                  posting();


            </script>
            {%endfor%}
                 
            
            
          <div class="col-lg-3">
            <div class="section-title">
              <h2>Popular Posts</h2>
            </div>

            <div class="trend-entry d-flex">
              <div class="number align-self-start">01</div>
              <div class="trend-contents">
                <h2><a href="{% url 'posts:blog_single' %}">News Needs to Meet Its Audiences Where They Are</a></h2>
                <div class="post-meta">
                  <span class="d-block"><a href="#">Dave Rogers</a> in <a href="#">News</a></span>
                  <span class="date-read">Jun 14 <span class="mx-1">&bullet;</span> 3 min read <span class="icon-star2"></span></span>
                </div>
              </div>
            </div>

            <div class="trend-entry d-flex">
              <div class="number align-self-start">02</div>
              <div class="trend-contents">
                <h2><a href="{% url 'posts:blog_single' %}">News Needs to Meet Its Audiences Where They Are</a></h2>
                <div class="post-meta">
                  <span class="d-block"><a href="#">Dave Rogers</a> in <a href="#">News</a></span>
                  <span class="date-read">Jun 14 <span class="mx-1">&bullet;</span> 3 min read <span class="icon-star2"></span></span>
                </div>
              </div>
            </div>

            <div class="trend-entry d-flex">
              <div class="number align-self-start">03</div>
              <div class="trend-contents">
                <h2><a href="{% url 'posts:blog_single' %}">News Needs to Meet Its Audiences Where They Are</a></h2>
                <div class="post-meta">
                  <span class="d-block"><a href="#">Dave Rogers</a> in <a href="#">News</a></span>
                  <span class="date-read">Jun 14 <span class="mx-1">&bullet;</span> 3 min read <span class="icon-star2"></span></span>
                </div>
              </div>
            </div>

            <div class="trend-entry d-flex pl-0">
              <div class="number align-self-start">04</div>
              <div class="trend-contents">
                <h2><a href="{% url 'posts:blog_single' %}">News Needs to Meet Its Audiences Where They Are</a></h2>
                <div class="post-meta">
                  <span class="d-block"><a href="#">Dave Rogers</a> in <a href="#">News</a></span>
                  <span class="date-read">Jun 14 <span class="mx-1">&bullet;</span> 3 min read <span class="icon-star2"></span></span>
                </div>
              </div>
            </div>
            
            <p>
              <a href="#" class="more">See All Popular <span class="icon-keyboard_arrow_right"></span></a>
            </p>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-6">
            <ul class="custom-pagination list-unstyled">
              <li><a href="#">1</a></li>
              <li class="active">2</li>
              <li><a href="#">3</a></li>
              <li><a href="#">4</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

{% endblock %}